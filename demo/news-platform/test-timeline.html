<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™‚é–“è»¸åŠŸèƒ½æ¸¬è©¦</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 30px;
        }
        
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: #f9f9f9;
        }
        
        .test-button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background 0.3s ease;
        }
        
        .test-button:hover {
            background: #2980b9;
        }
        
        .test-button:active {
            transform: translateY(1px);
        }
        
        .timeline-demo {
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e9ecef;
        }
        
        .timeline-container {
            position: relative;
            padding: 15px 0;
            overflow-x: auto;
            min-height: 160px;
        }
        
        .timeline-line {
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #3498db, #e74c3c);
            border-radius: 1px;
            transform: translateY(-50%);
        }
        
        .timeline-item {
            position: relative;
            display: inline-block;
            width: 160px;
            margin: 0 15px;
            text-align: center;
            vertical-align: top;
        }
        
        .time-point {
            width: 16px;
            height: 16px;
            background: #e74c3c;
            border: 3px solid white;
            border-radius: 50%;
            margin: 0 auto 12px auto;
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
            position: relative;
            z-index: 2;
        }
        
        .time-label {
            font-weight: bold;
            color: #2c3e50;
            font-size: 12px;
            margin-bottom: 8px;
            background: white;
            padding: 4px 8px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #ecf0f1;
        }
        
        .time-description {
            color: #555;
            font-size: 11px;
            line-height: 1.3;
            background: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
            border: 1px solid #e9ecef;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }
        
        .connector {
            position: absolute;
            top: 8px;
            right: -15px;
            width: 15px;
            height: 2px;
            background: #3498db;
            z-index: 1;
        }
        
        .info-box {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }
        
        .info-box h3 {
            margin: 0 0 10px 0;
            color: #2c3e50;
        }
        
        .info-box p {
            margin: 5px 0;
            color: #555;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>æ™‚é–“è»¸åŠŸèƒ½æ¸¬è©¦</h1>
        
        <div class="test-section">
            <h2>æ¸¬è©¦æ™‚é–“è»¸é¡¯ç¤º</h2>
            <p>é»æ“Šä»¥ä¸‹æŒ‰éˆ•æ¸¬è©¦ä¸åŒé¡å‹çš„ç¯€é»è©³æƒ…é¡¯ç¤ºï¼š</p>
            
            <button class="test-button" onclick="testWhenNode()">æ¸¬è©¦ WHEN ç¯€é»ï¼ˆæ™‚é–“è»¸ï¼‰</button>
            <button class="test-button" onclick="testCenterNode()">æ¸¬è©¦ä¸­å¿ƒç¯€é»</button>
            <button class="test-button" onclick="testWhoNode()">æ¸¬è©¦ WHO ç¯€é»</button>
        </div>
        
        <div class="test-section">
            <h2>æ™‚é–“è»¸åŠŸèƒ½èªªæ˜</h2>
            <div class="info-box">
                <h3>æ–°å¢åŠŸèƒ½</h3>
                <p><strong>æ™‚é–“è»¸ä½ˆå±€:</strong> WHEN ç¯€é»ç¾åœ¨ä½¿ç”¨æ©«å‘æ™‚é–“è»¸é¡¯ç¤º</p>
                <p><strong>è¦–è¦ºè¨­è¨ˆ:</strong> æ™‚é–“é»ä¸Šæ–¹é¡¯ç¤ºæ™‚é–“ï¼Œä¸‹æ–¹é¡¯ç¤ºæè¿°</p>
                <p><strong>éŸ¿æ‡‰å¼:</strong> æ”¯æ´æ°´å¹³æ»¾å‹•ï¼Œé©æ‡‰ä¸åŒè¢å¹•å¯¬åº¦</p>
                <p><strong>é€£æ¥ç·š:</strong> æ™‚é–“é»ä¹‹é–“æœ‰æ¼¸è®Šé€£æ¥ç·š</p>
            </div>
        </div>
        
        <div class="test-section">
            <h2>æ™‚é–“è»¸é è¦½</h2>
            <div class="timeline-demo">
                <h3 style="text-align: center; margin-bottom: 20px; color: #34495e;">æ™‚é–“è»¸</h3>
                <div class="timeline-container">
                    <div class="timeline-line"></div>
                    
                    <div class="timeline-item">
                        <div class="time-point"></div>
                        <div class="time-label">2025å¹´8æœˆ22æ—¥</div>
                        <div class="time-description">ç½·å…æŠ•ç¥¨å‰å¤•ï¼Œè—ç¶ é™£ç‡ŸåŠ ç·Šå‹•å“¡ï¼Œè”£è¬å®‰å—ä¸‹è¼”é¸ï¼Œç½·å…åœ˜é«”é€²è¡Œæœ€å¾Œè¡åˆºã€‚</div>
                        <div class="connector"></div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="time-point"></div>
                        <div class="time-label">2025å¹´8æœˆ23æ—¥</div>
                        <div class="time-description">å°ç£èˆ‰è¡Œç¬¬äºŒè¼ªç«‹å§”ç½·å…æŠ•ç¥¨ï¼Œå…±æœ‰ä¸ƒååœ‹æ°‘é»¨ç«‹å§”æ¥å—è€ƒé©—ï¼Œç½·å…æ¡ˆåŠæ ¸ä¸‰é‡å•Ÿå…¬æŠ•å‡æœªé€šéã€‚</div>
                        <div class="connector"></div>
                    </div>
                    
                    <div class="timeline-item">
                        <div class="time-point"></div>
                        <div class="time-label">2025å¹´8æœˆ26æ—¥</div>
                        <div class="time-description">ç½·å…å…¬æŠ•è½å¹•å¾Œï¼Œè³´æ¸…å¾·å®£å¸ƒå…§é–£å°‡æ”¹çµ„ï¼Œæœ±ç«‹å€«å‘¼ç±²é‡‹æ”¾æŸ¯æ–‡å“²ï¼Œæ°‘é€²é»¨åœ˜å¹¹éƒ¨è«‹è¾­ã€‚</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="test-section">
            <h2>é™¤éŒ¯è³‡è¨Š</h2>
            <p>é–‹å•Ÿç€è¦½å™¨é–‹ç™¼è€…å·¥å…·æŸ¥çœ‹æ§åˆ¶å°è¼¸å‡º</p>
            <button class="test-button" onclick="clearConsole()">æ¸…é™¤æ§åˆ¶å°</button>
        </div>
    </div>

    <script>
        // æ¨¡æ“¬ FiveW1HVisualization çš„ç¯€é»è©³æƒ…é¡¯ç¤ºåŠŸèƒ½
        function showNodeDetail(node) {
            try {
                console.log('ğŸ” é–‹å§‹é¡¯ç¤ºç¯€é»è©³æƒ…:', node);
                
                // ç§»é™¤ç¾æœ‰çš„è©³æƒ…è¦–çª—
                const existingModal = document.getElementById('node-detail-modal');
                if (existingModal) {
                    existingModal.remove();
                }
                
                // å‰µå»ºè©³æƒ…è¦–çª—
                const modal = document.createElement('div');
                modal.id = 'node-detail-modal';
                modal.style.cssText = `
                    position: fixed;
                    top: 0;
                    left: 0;
                    width: 100%;
                    height: 100%;
                    background: rgba(0, 0, 0, 0.5);
                    display: flex;
                    justify-content: center;
                    align-items: center;
                    z-index: 10000;
                    cursor: pointer;
                `;
                
                // å‰µå»ºè¦–çª—å…§å®¹
                const modalContent = document.createElement('div');
                modalContent.style.cssText = `
                    background: white;
                    border-radius: 15px;
                    padding: 25px;
                    max-width: 800px;
                    width: 90%;
                    max-height: 80vh;
                    overflow-y: auto;
                    box-shadow: 0 20px 40px rgba(0,0,0,0.3);
                    cursor: default;
                    position: relative;
                `;
                
                // é—œé–‰æŒ‰éˆ•
                const closeBtn = document.createElement('button');
                closeBtn.innerHTML = 'Ã—';
                closeBtn.style.cssText = `
                    position: absolute;
                    top: 15px;
                    right: 20px;
                    background: none;
                    border: none;
                    font-size: 24px;
                    cursor: pointer;
                    color: #666;
                    width: 30px;
                    height: 30px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    border-radius: 50%;
                    transition: background 0.3s ease;
                `;
                
                closeBtn.onmouseover = () => {
                    closeBtn.style.background = '#f0f0f0';
                };
                
                closeBtn.onmouseout = () => {
                    closeBtn.style.background = 'none';
                };
                
                closeBtn.onclick = () => {
                    modal.remove();
                };
                
                // ç¯€é»æ¨™é¡Œ
                const title = document.createElement('h2');
                title.textContent = node.label;
                title.style.cssText = `
                    margin: 0 0 15px 0;
                    color: #2c3e50;
                    font-size: 1.5em;
                    font-weight: bold;
                    text-align: center;
                `;
                
                // ç¯€é»é¡å‹æ¨™ç±¤
                const typeLabel = document.createElement('div');
                typeLabel.textContent = getNodeTypeLabel(node.type);
                typeLabel.style.cssText = `
                    display: inline-block;
                    background: ${getNodeTypeColor(node.type)};
                    color: white;
                    padding: 5px 12px;
                    border-radius: 20px;
                    font-size: 12px;
                    font-weight: bold;
                    margin-bottom: 20px;
                    text-align: center;
                `;
                
                // ç¯€é»æè¿°
                const description = document.createElement('p');
                description.textContent = node.description;
                description.style.cssText = `
                    margin: 15px 0;
                    color: #555;
                    line-height: 1.6;
                    font-size: 14px;
                `;
                
                // çµ„è£è¦–çª—å…§å®¹
                modalContent.appendChild(closeBtn);
                modalContent.appendChild(title);
                modalContent.appendChild(typeLabel);
                modalContent.appendChild(description);
                
                // å¦‚æœæ˜¯æ™‚é–“ç¯€é»ï¼Œæ·»åŠ æ™‚é–“è»¸
                if (node.category === 'when') {
                    const timelineContent = createTimelineContent();
                    if (timelineContent) {
                        modalContent.appendChild(timelineContent);
                    }
                }
                
                // å°‡å…§å®¹æ·»åŠ åˆ°æ¨¡æ…‹è¦–çª—
                modal.appendChild(modalContent);
                
                // é»æ“ŠèƒŒæ™¯é—œé–‰è¦–çª—
                modal.onclick = (e) => {
                    if (e.target === modal) {
                        modal.remove();
                    }
                };
                
                // æ·»åŠ åˆ°é é¢
                document.body.appendChild(modal);
                
                console.log('âœ… ç¯€é»è©³æƒ…è¦–çª—å‰µå»ºæˆåŠŸ');
            } catch (error) {
                console.error('âŒ å‰µå»ºç¯€é»è©³æƒ…è¦–çª—å¤±æ•—:', error);
                alert(`é¡¯ç¤ºç¯€é»è©³æƒ…å¤±æ•—: ${node.label || 'æœªçŸ¥ç¯€é»'}`);
            }
        }
        
        function createTimelineContent() {
            const container = document.createElement('div');
            container.style.cssText = `
                margin-top: 20px;
                border-top: 1px solid #eee;
                padding-top: 20px;
            `;
            
            const title = document.createElement('h3');
            title.textContent = 'æ™‚é–“è»¸';
            title.style.cssText = `
                margin: 0 0 20px 0;
                color: #34495e;
                font-size: 1.2em;
                font-weight: bold;
                text-align: center;
            `;
            
            container.appendChild(title);
            
            // å‰µå»ºæ™‚é–“è»¸å®¹å™¨
            const timelineContainer = document.createElement('div');
            timelineContainer.style.cssText = `
                position: relative;
                padding: 15px 0;
                overflow-x: auto;
            `;
            
            // å‰µå»ºæ™‚é–“è»¸ç·š
            const timelineLine = document.createElement('div');
            timelineLine.style.cssText = `
                position: absolute;
                top: 50%;
                left: 0;
                right: 0;
                height: 2px;
                background: linear-gradient(90deg, #3498db, #e74c3c);
                border-radius: 1px;
                transform: translateY(-50%);
            `;
            
            timelineContainer.appendChild(timelineLine);
            
            // æ¨¡æ“¬æ™‚é–“ç¯€é»è³‡æ–™
            const timeNodes = [
                {
                    label: '2025å¹´8æœˆ22æ—¥',
                    description: 'ç½·å…æŠ•ç¥¨å‰å¤•ï¼Œè—ç¶ é™£ç‡ŸåŠ ç·Šå‹•å“¡ï¼Œè”£è¬å®‰å—ä¸‹è¼”é¸ï¼Œç½·å…åœ˜é«”é€²è¡Œæœ€å¾Œè¡åˆºã€‚'
                },
                {
                    label: '2025å¹´8æœˆ23æ—¥',
                    description: 'å°ç£èˆ‰è¡Œç¬¬äºŒè¼ªç«‹å§”ç½·å…æŠ•ç¥¨ï¼Œå…±æœ‰ä¸ƒååœ‹æ°‘é»¨ç«‹å§”æ¥å—è€ƒé©—ï¼Œç½·å…æ¡ˆåŠæ ¸ä¸‰é‡å•Ÿå…¬æŠ•å‡æœªé€šéã€‚'
                },
                {
                    label: '2025å¹´8æœˆ26æ—¥',
                    description: 'ç½·å…å…¬æŠ•è½å¹•å¾Œï¼Œè³´æ¸…å¾·å®£å¸ƒå…§é–£å°‡æ”¹çµ„ï¼Œæœ±ç«‹å€«å‘¼ç±²é‡‹æ”¾æŸ¯æ–‡å“²ï¼Œæ°‘é€²é»¨åœ˜å¹¹éƒ¨è«‹è¾­ã€‚'
                }
            ];
            
            // å‰µå»ºæ™‚é–“é»
            timeNodes.forEach((timeNode, index) => {
                const timelineItem = document.createElement('div');
                timelineItem.style.cssText = `
                    position: relative;
                    display: inline-block;
                    width: 160px;
                    margin: 0 15px;
                    text-align: center;
                    vertical-align: top;
                `;
                
                // æ™‚é–“é»åœ“åœˆ
                const timePoint = document.createElement('div');
                timePoint.style.cssText = `
                    width: 16px;
                    height: 16px;
                    background: #e74c3c;
                    border: 3px solid white;
                    border-radius: 50%;
                    margin: 0 auto 12px auto;
                    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
                    position: relative;
                    z-index: 2;
                `;
                
                // æ™‚é–“æ¨™ç±¤
                const timeLabel = document.createElement('div');
                timeLabel.textContent = timeNode.label;
                timeLabel.style.cssText = `
                    font-weight: bold;
                    color: #2c3e50;
                    font-size: 12px;
                    margin-bottom: 8px;
                    background: white;
                    padding: 4px 8px;
                    border-radius: 12px;
                    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
                    border: 1px solid #ecf0f1;
                `;
                
                // æè¿°å…§å®¹
                const description = document.createElement('div');
                description.textContent = timeNode.description;
                description.style.cssText = `
                    color: #555;
                    font-size: 11px;
                    line-height: 1.3;
                    background: #f8f9fa;
                    padding: 10px;
                    border-radius: 6px;
                    border: 1px solid #e9ecef;
                    min-height: 60px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    text-align: center;
                `;
                
                // é€£æ¥ç·šï¼ˆé™¤äº†æœ€å¾Œä¸€å€‹é»ï¼‰
                if (index < timeNodes.length - 1) {
                    const connector = document.createElement('div');
                    connector.style.cssText = `
                        position: absolute;
                        top: 8px;
                        right: -15px;
                        width: 15px;
                        height: 2px;
                        background: #3498db;
                        z-index: 1;
                    `;
                    timelineItem.appendChild(connector);
                }
                
                timelineItem.appendChild(timePoint);
                timelineItem.appendChild(timeLabel);
                timelineItem.appendChild(description);
                timelineContainer.appendChild(timelineItem);
            });
            
            container.appendChild(timelineContainer);
            
            return container;
        }
        
        function getNodeTypeLabel(type) {
            const labels = {
                'center': 'æ ¸å¿ƒè­°é¡Œ',
                '5w1h': '5W1Hè¦ç´ ',
                'detail': 'è©³ç´°è³‡è¨Š'
            };
            return labels[type] || 'æœªçŸ¥é¡å‹';
        }
        
        function getNodeTypeColor(type) {
            const colors = {
                'center': '#e74c3c',
                '5w1h': '#3498db',
                'detail': '#95a5a6'
            };
            return colors[type] || '#95a5a6';
        }
        
        // æ¸¬è©¦å‡½æ•¸
        function testWhenNode() {
            const node = {
                id: 'when',
                label: 'ç™¼ç”Ÿæ™‚é–“',
                type: '5w1h',
                category: 'when',
                description: 'ä¸»è¦ç™¼ç”Ÿåœ¨2025å¹´8æœˆï¼ŒåŒ…æ‹¬ç½·å…æŠ•ç¥¨æ—¥åŠå‰å¾Œçš„æ”¿æ²»æ´»å‹•ï¼Œä»¥åŠå…¬æŠ•çš„èˆ‰è¡Œæ™‚é–“ã€‚'
            };
            showNodeDetail(node);
        }
        
        function testCenterNode() {
            const node = {
                id: 'center',
                label: 'å¤§ç½·å…äº‹ä»¶æ¦‚è¿°',
                type: 'center',
                description: '2025å¹´å°ç£ç™¼ç”Ÿäº†é‡å°å¤šä½åœ‹æ°‘é»¨ç«‹å§”çš„ç½·å…æ¡ˆï¼Œä»¥åŠæ ¸ä¸‰é‡å•Ÿå…¬æŠ•ã€‚ç½·å…æ¡ˆç”±å…¬æ°‘åœ˜é«”ç™¼èµ·ï¼Œæ°‘é€²é»¨æ”¯æŒï¼Œä½†æœ€çµ‚å‡æœªé€šéã€‚äº‹ä»¶åæ˜ å°ç£æ”¿æ²»é€²å…¥æœé‡å‹¢å‡åŠ›æ•µçš„æ–°å±€é¢ï¼Œä¸¦å¼•ç™¼å…§é–£æ”¹çµ„åŠæ”¿é»¨å…§éƒ¨çš„æª¢è¨ã€‚'
            };
            showNodeDetail(node);
        }
        
        function testWhoNode() {
            const node = {
                id: 'who',
                label: 'ç›¸é—œäººç‰©',
                type: '5w1h',
                category: 'who',
                description: 'åŒ…æ‹¬è¢«ç½·å…çš„åœ‹æ°‘é»¨ç«‹å§”ã€ç™¼èµ·ç½·å…çš„å…¬æ°‘åœ˜é«”ã€æ°‘é€²é»¨åŠåœ‹æ°‘é»¨çš„æ”¿æ²»äººç‰©ï¼Œä»¥åŠå—å…¬æŠ•å½±éŸ¿çš„æ°‘çœ¾ã€‚'
            };
            showNodeDetail(node);
        }
        
        function clearConsole() {
            console.clear();
            console.log('ğŸ§¹ æ§åˆ¶å°å·²æ¸…é™¤');
        }
        
        // é é¢è¼‰å…¥å®Œæˆå¾Œçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            console.log('âœ… æ™‚é–“è»¸æ¸¬è©¦é é¢è¼‰å…¥å®Œæˆ');
            console.log('ğŸ”§ é»æ“Šã€Œæ¸¬è©¦ WHEN ç¯€é»ï¼ˆæ™‚é–“è»¸ï¼‰ã€æŒ‰éˆ•ä¾†æ¸¬è©¦æ–°çš„æ™‚é–“è»¸åŠŸèƒ½');
        });
    </script>
</body>
</html>
