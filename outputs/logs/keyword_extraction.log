2025-08-22 15:28:42,987 - INFO - ✓ Gemini API (gemini-2.5-flash-lite) 初始化成功
2025-08-22 15:28:43,226 - INFO - ✓ Supabase 連線 (https://iiqimdwocmqtiudfezlh.supabase.co) 初始化成功
2025-08-22 15:28:43,226 - INFO - ================================================================================
2025-08-22 15:28:43,226 - INFO -   困難關鍵字提取系統 - 可存入資料庫版本
2025-08-22 15:28:43,227 - INFO - ================================================================================
2025-08-22 15:28:43,227 - INFO - === 讀取合併資料 ===
2025-08-22 15:28:43,227 - INFO - 讀取 single_news 資料...
2025-08-22 15:28:43,482 - INFO - 讀取所有資料
2025-08-22 15:28:44,020 - INFO - 成功讀取 85 筆新聞資料
2025-08-22 15:28:44,023 - INFO - 讀取 term_map 資料...
2025-08-22 15:28:44,287 - INFO - 成功讀取 268 筆 term_map 資料
2025-08-22 15:28:44,288 - INFO - 組織 term_map: 48 個不同的 story_id
2025-08-22 15:28:44,288 - INFO - 合併完成: 85 筆新聞資料
2025-08-22 15:28:44,288 - INFO - === 階段一：從新聞中提取困難關鍵字 ===
2025-08-22 15:31:21,487 - INFO - ✓ 階段一完成：共提取 490 個不重複關鍵字。
2025-08-22 15:31:21,487 - INFO - === 階段二：為關鍵字生成解釋與範例 ===
2025-08-22 15:33:12,281 - WARNING - ✗ API 呼叫時發生錯誤 (嘗試 1/3): 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-08-22 15:39:38,360 - WARNING - ✗ API 呼叫時發生錯誤 (嘗試 1/3): 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-08-22 15:40:58,641 - WARNING - ✗ API 呼叫時發生錯誤 (嘗試 1/3): 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-08-22 15:43:44,913 - WARNING - ✗ API 呼叫時發生錯誤 (嘗試 1/3): 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-08-22 15:50:48,925 - INFO - ✓ 階段二完成：共成功解釋 490 個詞彙。
2025-08-22 15:50:48,925 - INFO - === 階段三：檢查重複性並準備插入 ===
2025-08-22 15:50:48,925 - INFO - === 檢查 term_map 重複性 ===
2025-08-22 15:50:50,841 - INFO - === 階段四：執行資料庫插入 ===
2025-08-22 15:50:50,841 - INFO - === 開始插入 term 資料 ===
2025-08-22 15:50:50,842 - INFO - 準備插入 463 筆資料到 term 表
2025-08-22 15:50:51,296 - INFO - ✓ 批次 1: 成功插入 50 筆
2025-08-22 15:50:51,531 - INFO - ✓ 批次 2: 成功插入 50 筆
2025-08-22 15:50:51,968 - INFO - ✓ 批次 3: 成功插入 50 筆
2025-08-22 15:50:52,180 - INFO - ✓ 批次 4: 成功插入 50 筆
2025-08-22 15:50:52,376 - INFO - ✓ 批次 5: 成功插入 50 筆
2025-08-22 15:50:52,603 - INFO - ✓ 批次 6: 成功插入 50 筆
2025-08-22 15:50:52,835 - INFO - ✓ 批次 7: 成功插入 50 筆
2025-08-22 15:50:53,047 - INFO - ✓ 批次 8: 成功插入 50 筆
2025-08-22 15:50:53,275 - INFO - ✓ 批次 9: 成功插入 50 筆
2025-08-22 15:50:53,457 - INFO - ✓ 批次 10: 成功插入 13 筆
2025-08-22 15:50:53,458 - INFO - term 插入結果:
2025-08-22 15:50:53,458 - INFO -   成功: 463 筆
2025-08-22 15:50:53,459 - INFO -   失敗: 0 筆
2025-08-22 15:50:53,459 - INFO - === 開始插入 term_map 資料 ===
2025-08-22 15:50:53,460 - INFO - 準備插入 538 筆資料到 term_map 表
2025-08-22 15:50:53,675 - INFO - ✓ 批次 1: 成功插入 100 筆
2025-08-22 15:50:53,847 - INFO - ✓ 批次 2: 成功插入 100 筆
2025-08-22 15:50:54,017 - INFO - ✓ 批次 3: 成功插入 100 筆
2025-08-22 15:50:54,228 - INFO - ✓ 批次 4: 成功插入 100 筆
2025-08-22 15:50:54,409 - INFO - ✓ 批次 5: 成功插入 100 筆
2025-08-22 15:50:54,591 - INFO - ✓ 批次 6: 成功插入 38 筆
2025-08-22 15:50:54,592 - INFO - term_map 插入結果:
2025-08-22 15:50:54,593 - INFO -   成功: 538 筆
2025-08-22 15:50:54,593 - INFO -   失敗: 0 筆
2025-08-22 15:50:54,594 - INFO - ================================================================================
2025-08-22 15:50:54,595 - INFO -   執行完成摘要
2025-08-22 15:50:54,595 - INFO - ================================================================================
2025-08-22 15:50:54,596 - INFO - ✓ 處理新聞數量: 83
2025-08-22 15:50:54,596 - INFO - ✓ 不重複關鍵字: 490
2025-08-22 15:50:54,596 - INFO - ✓ 成功解釋詞彙: 490
2025-08-22 15:50:54,596 - INFO - ✓ 成功 插入 term 表: 463 個新關鍵字
2025-08-22 15:50:54,597 - INFO - ✓ 成功 插入 term_map 表: 538 筆新組合
2025-08-22 15:50:54,597 - INFO - ================================================================================
2025-08-22 23:38:25,859 - INFO - ✓ Gemini API (gemini-2.5-flash-lite) 初始化成功
2025-08-22 23:38:26,107 - INFO - ✓ Supabase 連線 (https://iiqimdwocmqtiudfezlh.supabase.co) 初始化成功
2025-08-22 23:38:26,108 - INFO - ================================================================================
2025-08-22 23:38:26,108 - INFO -   困難關鍵字提取系統 - 可存入資料庫版本
2025-08-22 23:38:26,108 - INFO - ================================================================================
2025-08-22 23:38:26,108 - INFO - === 讀取合併資料 ===
2025-08-22 23:38:26,108 - INFO - 讀取 single_news 資料...
2025-08-22 23:38:26,358 - INFO - 讀取所有資料
2025-08-22 23:38:26,809 - INFO - 成功讀取 40 筆新聞資料
2025-08-22 23:38:26,809 - INFO - 讀取 term_map 資料...
2025-08-22 23:38:27,015 - INFO - 成功讀取 806 筆 term_map 資料
2025-08-22 23:38:27,017 - INFO - 組織 term_map: 129 個不同的 story_id
2025-08-22 23:38:27,017 - INFO - 合併完成: 40 筆新聞資料
2025-08-22 23:38:27,017 - INFO - === 階段一：從新聞中提取困難關鍵字 ===
2025-08-22 23:39:02,487 - WARNING - ✗ API 呼叫時發生錯誤 (嘗試 1/3): 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-08-22 23:39:45,902 - INFO - ✓ 階段一完成：共提取 261 個不重複關鍵字。
2025-08-22 23:39:45,902 - INFO - === 階段二：為關鍵字生成解釋與範例 ===
2025-08-22 23:42:18,780 - WARNING - ✗ API 呼叫時發生錯誤 (嘗試 1/3): 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-08-22 23:45:59,038 - WARNING - ✗ API 呼叫時發生錯誤 (嘗試 1/3): 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-08-22 23:46:50,819 - WARNING - ✗ API 呼叫時發生錯誤 (嘗試 1/3): 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-08-22 23:47:41,074 - WARNING - ✗ API 呼叫時發生錯誤 (嘗試 1/3): 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-08-22 23:48:48,272 - WARNING - ✗ API 呼叫時發生錯誤 (嘗試 1/3): 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-08-22 23:50:06,761 - WARNING - ✗ JSON 解析錯誤 (嘗試 1/3): Unterminated string starting at: line 7 column 21 (char 183)
2025-08-22 23:50:50,977 - INFO - ✓ 階段二完成：共成功解釋 261 個詞彙。
2025-08-22 23:50:50,978 - INFO - === 階段三：檢查重複性並準備插入 ===
2025-08-22 23:50:50,978 - INFO - === 檢查 term_map 重複性 ===
2025-08-22 23:50:52,644 - INFO - === 階段四：執行資料庫插入 ===
2025-08-22 23:50:52,644 - INFO - === 開始插入 term 資料 ===
2025-08-22 23:50:52,644 - INFO - 準備插入 185 筆資料到 term 表
2025-08-22 23:50:52,984 - INFO - ✓ 批次 1: 成功插入 50 筆
2025-08-22 23:50:53,263 - INFO - ✓ 批次 2: 成功插入 50 筆
2025-08-22 23:50:53,621 - INFO - ✓ 批次 3: 成功插入 50 筆
2025-08-22 23:50:54,810 - INFO - ✓ 批次 4: 成功插入 35 筆
2025-08-22 23:50:54,810 - INFO - term 插入結果:
2025-08-22 23:50:54,810 - INFO -   成功: 185 筆
2025-08-22 23:50:54,810 - INFO -   失敗: 0 筆
2025-08-22 23:50:54,810 - INFO - === 開始插入 term_map 資料 ===
2025-08-22 23:50:54,810 - INFO - 準備插入 228 筆資料到 term_map 表
2025-08-22 23:50:55,094 - INFO - ✓ 批次 1: 成功插入 100 筆
2025-08-22 23:50:55,349 - INFO - ✓ 批次 2: 成功插入 100 筆
2025-08-22 23:50:55,583 - INFO - ✓ 批次 3: 成功插入 28 筆
2025-08-22 23:50:55,583 - INFO - term_map 插入結果:
2025-08-22 23:50:55,583 - INFO -   成功: 228 筆
2025-08-22 23:50:55,583 - INFO -   失敗: 0 筆
2025-08-22 23:50:55,583 - INFO - ================================================================================
2025-08-22 23:50:55,584 - INFO -   執行完成摘要
2025-08-22 23:50:55,584 - INFO - ================================================================================
2025-08-22 23:50:55,584 - INFO - ✓ 處理新聞數量: 40
2025-08-22 23:50:55,584 - INFO - ✓ 不重複關鍵字: 261
2025-08-22 23:50:55,584 - INFO - ✓ 成功解釋詞彙: 261
2025-08-22 23:50:55,584 - INFO - ✓ 成功 插入 term 表: 185 個新關鍵字
2025-08-22 23:50:55,584 - INFO - ✓ 成功 插入 term_map 表: 228 筆新組合
2025-08-22 23:50:55,584 - INFO - ================================================================================
2025-08-23 06:41:59,293 - INFO - ✓ Gemini API (gemini-2.5-flash-lite) 初始化成功
2025-08-23 06:42:00,045 - INFO - ✓ Supabase 連線 (https://iiqimdwocmqtiudfezlh.supabase.co) 初始化成功
2025-08-23 06:42:00,046 - INFO - ================================================================================
2025-08-23 06:42:00,046 - INFO -   困難關鍵字提取系統 - 可存入資料庫版本
2025-08-23 06:42:00,046 - INFO - ================================================================================
2025-08-23 06:42:00,046 - INFO - === 讀取合併資料 ===
2025-08-23 06:42:00,047 - INFO - 讀取 single_news 資料...
2025-08-23 06:42:00,832 - INFO - 讀取所有資料
2025-08-23 06:42:01,457 - INFO - 成功讀取 9 筆新聞資料
2025-08-23 06:42:01,457 - INFO - 讀取 term_map 資料...
2025-08-23 06:42:01,881 - INFO - 成功讀取 1000 筆 term_map 資料
2025-08-23 06:42:01,882 - INFO - 組織 term_map: 155 個不同的 story_id
2025-08-23 06:42:01,883 - INFO - 合併完成: 9 筆新聞資料
2025-08-23 06:42:01,883 - INFO - === 階段一：從新聞中提取困難關鍵字 ===
2025-08-23 06:42:19,751 - INFO - ✓ 階段一完成：共提取 97 個不重複關鍵字。
2025-08-23 06:42:19,752 - INFO - === 階段二：為關鍵字生成解釋與範例 ===
2025-08-23 06:42:27,116 - WARNING - ✗ API 呼叫時發生錯誤 (嘗試 1/3): 500 An internal error has occurred. Please retry or report in https://developers.generativeai.google/guide/troubleshooting
2025-08-23 06:46:10,840 - INFO - ✓ 階段二完成：共成功解釋 97 個詞彙。
2025-08-23 06:46:10,841 - INFO - === 階段三：檢查重複性並準備插入 ===
2025-08-23 06:46:10,842 - INFO - === 檢查 term_map 重複性 ===
2025-08-23 06:46:11,959 - INFO - === 階段四：執行資料庫插入 ===
2025-08-23 06:46:11,959 - INFO - === 開始插入 term 資料 ===
2025-08-23 06:46:11,959 - INFO - 準備插入 35 筆資料到 term 表
2025-08-23 06:46:12,188 - INFO - ✓ 批次 1: 成功插入 35 筆
2025-08-23 06:46:12,189 - INFO - term 插入結果:
2025-08-23 06:46:12,189 - INFO -   成功: 35 筆
2025-08-23 06:46:12,189 - INFO -   失敗: 0 筆
2025-08-23 06:46:12,189 - INFO - === 開始插入 term_map 資料 ===
2025-08-23 06:46:12,189 - INFO - 準備插入 40 筆資料到 term_map 表
2025-08-23 06:46:12,392 - ERROR - ✗ 批次 1 發生錯誤: {'message': 'duplicate key value violates unique constraint "term_map_pkey"', 'code': '23505', 'hint': None, 'details': 'Key (story_id, term)=(14efea4d-8739-4187-99b1-639f818bccf6, 能登半島地震) already exists.'}
2025-08-23 06:46:12,393 - INFO - term_map 插入結果:
2025-08-23 06:46:12,393 - INFO -   成功: 0 筆
2025-08-23 06:46:12,394 - INFO -   失敗: 40 筆
2025-08-23 06:46:12,394 - INFO - ================================================================================
2025-08-23 06:46:12,394 - INFO -   執行完成摘要
2025-08-23 06:46:12,394 - INFO - ================================================================================
2025-08-23 06:46:12,394 - INFO - ✓ 處理新聞數量: 9
2025-08-23 06:46:12,395 - INFO - ✓ 不重複關鍵字: 97
2025-08-23 06:46:12,395 - INFO - ✓ 成功解釋詞彙: 97
2025-08-23 06:46:12,395 - INFO - ✓ 成功 插入 term 表: 35 個新關鍵字
2025-08-23 06:46:12,395 - INFO - ✗ 失敗 插入 term_map 表: 40 筆新組合
2025-08-23 06:46:12,395 - INFO - ================================================================================
